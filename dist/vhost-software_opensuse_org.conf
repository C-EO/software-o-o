<VirtualHost *:80>
  ServerAdmin admin@opensuse.org
  ServerName software.opensuse.org
  ServerAlias software-stage.opensuse.org

  DocumentRoot /srv/www/vhosts/opensuse.org/software/current/public

  CustomLog /var/log/apache2/software.opensuse.org-access.log combined
  ErrorLog /var/log/apache2/software.opensuse.org-error.log

  <location /assets>
    ProxyPass !
  </location>
  <location /images>
    ProxyPass !
  </location>
  <location /robots.txt>
    ProxyPass !
  </location>
  <location /search_software.xml>
    ProxyPass !
  </location>
  <location /favicon.ico>
    ProxyPass !
  </location>
  <location /500.html>
    ProxyPass !
  </location>

  ProxyPass / http://127.0.0.1:3000/
  ProxyPassReverse / http://127.0.0.1:3000/

  # don't loose time with IP address lookups
  HostnameLookups Off

  # needed for named virtual hosts
  UseCanonicalName Off

  # configures the footer on server-generated documents
  ServerSignature On

  <Directory "/srv/www/vhosts/opensuse.org/software/current/public">
    # Directives needed by Passenger
    Options -MultiViews
    Require all granted

    Options +SymLinksIfOwnerMatch +FollowSymLinks
    #   Options +FollowSymLinks
  </Directory>

</VirtualHost>
